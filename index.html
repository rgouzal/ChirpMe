<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ü¶ú Simple Cockatiel Chat</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .bird-bg {
            background: linear-gradient(135deg, #87CEEB 0%, #98FB98 50%, #FFE4B5 100%);
        }
        .bird-animation {
            animation: birdFloat 3s ease-in-out infinite;
        }
        @keyframes birdFloat {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
        }
    </style>
</head>
<body class="bird-bg min-h-screen">
    <div class="container mx-auto px-4 py-8 max-w-lg">
        <div class="text-center mb-8">
            <h1 class="text-4xl font-bold text-gray-800 bird-animation mb-2">ü¶ú Cockatiel Connect</h1>
            <p class="text-lg text-gray-600">Simple Bird Sound Demo</p>
            <div id="status" class="mt-4 px-4 py-2 bg-white/80 rounded-full text-sm">
                ‚úÖ Ready to use!
            </div>
        </div>

        <div class="bg-white/90 rounded-2xl p-6 shadow-lg">
            <h2 class="text-xl font-semibold mb-4">üí¨ Say something to your cockatiel:</h2>
            
            <div class="space-y-4">
                <!-- Quick Messages -->
                <div class="grid grid-cols-2 gap-2">
                    <button onclick="sayThis('Hello friend!')" class="px-3 py-2 bg-yellow-100 rounded hover:bg-yellow-200">
                        üëã Hello!
                    </button>
                    <button onclick="sayThis('Want a treat?')" class="px-3 py-2 bg-orange-100 rounded hover:bg-orange-200">
                        üçé Treat?
                    </button>
                    <button onclick="sayThis('Look at me!')" class="px-3 py-2 bg-blue-100 rounded hover:bg-blue-200">
                        üëÄ Look!
                    </button>
                    <button onclick="sayThis('Stop that!')" class="px-3 py-2 bg-red-100 rounded hover:bg-red-200">
                        ‚ö†Ô∏è Stop!
                    </button>
                </div>

                <!-- Text Input -->
                <textarea 
                    id="message" 
                    placeholder="Type your message..."
                    class="w-full p-4 border rounded-xl resize-none"
                    rows="3"
                ></textarea>

                <!-- Generate Button -->
                <button 
                    id="generateBtn" 
                    onclick="generateAndPlay()"
                    class="w-full py-4 bg-teal-500 text-white font-semibold rounded-xl hover:bg-teal-600"
                >
                    üê¶ Make Bird Sound
                </button>

                <!-- Result -->
                <div id="result" class="text-center text-gray-600"></div>
            </div>
        </div>
    </div>

    <script>
        let audioContext = null;

        // Initialize audio immediately
        function initAudio() {
            try {
                audioContext = new (window.AudioContext || window.webkitAudioContext)();
                console.log('Audio ready');
            } catch (e) {
                console.log('Audio not available');
                document.getElementById('status').textContent = '‚ùå Audio not supported';
            }
        }

        // Set message
        function sayThis(text) {
            document.getElementById('message').value = text;
        }

        // Generate simple bird sound
        async function generateBirdSound(text) {
            if (!audioContext) return;

            const duration = 2;
            const sampleRate = 44100;
            const buffer = audioContext.createBuffer(1, duration * sampleRate, sampleRate);
            const data = buffer.getChannelData(0);

            // Simple bird-like sound
            for (let i = 0; i < data.length; i++) {
                const time = i / sampleRate;
                const freq = 2200 + Math.sin(time * 8) * 200; // Varying frequency
                const envelope = Math.max(0, 1 - time / duration);
                data[i] = Math.sin(2 * Math.PI * freq * time) * envelope * 0.5;
            }

            return buffer;
        }

        // Play audio buffer
        function playBuffer(buffer) {
            if (!audioContext) return;
            
            const source = audioContext.createBufferSource();
            source.buffer = buffer;
            source.connect(audioContext.destination);
            source.start();
        }

        // Main function
        async function generateAndPlay() {
            const message = document.getElementById('message').value.trim();
            if (!message) {
                alert('Please type a message first!');
                return;
            }

            const result = document.getElementById('result');
            result.textContent = 'üîÑ Making bird sound...';

            try {
                if (!audioContext) {
                    initAudio();
                }

                const buffer = await generateBirdSound(message);
                playBuffer(buffer);
                
                result.textContent = '‚úÖ Bird sound played!';
                setTimeout(() => result.textContent = '', 2000);
                
            } catch (error) {
                result.textContent = '‚ùå Error: ' + error.message;
                console.error('Error:', error);
            }
        }

        // Enable button when typing
        document.getElementById('message').addEventListener('input', function() {
            const btn = document.getElementById('generateBtn');
            btn.disabled = !this.value.trim();
            btn.textContent = this.value.trim() ? 'üê¶ Make Bird Sound' : 'üê¶ Make Bird Sound';
        });

        // Auto-initialize
        window.addEventListener('load', initAudio);
        
        console.log('Simple demo loaded');
    </script>
</body>
</html>
